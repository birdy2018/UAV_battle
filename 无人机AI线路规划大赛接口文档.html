<!DOCTYPE html>
<!-- saved from url=(0070)https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump6 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>无人机AI线路规划大赛接口文档</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style type="text/css">/*! normalize.css v3.0.1 | MIT License | git.io/normalize */

/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
  font-family: sans-serif; /* 1 */
  -ms-text-size-adjust: 100%; /* 2 */
  -webkit-text-size-adjust: 100%; /* 2 */
}

/**
 * Remove default margin.
 */

body {
  margin: 0;
}

/* HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined for any HTML5 element in IE 8/9.
 * Correct `block` display not defined for `details` or `summary` in IE 10/11 and Firefox.
 * Correct `block` display not defined for `main` in IE 11.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
  display: block;
}

/**
 * 1. Correct `inline-block` display not defined in IE 8/9.
 * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
 */

audio,
canvas,
progress,
video {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9/10.
 * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
 */

[hidden],
template {
  display: none;
}

/* Links
   ========================================================================== */

/**
 * Remove the gray background color from active links in IE 10.
 */

a {
  background: transparent;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
  outline: 0;
}

/* Text-level semantics
   ========================================================================== */

/**
 * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
 */

abbr[title] {
  border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
 */

b,
strong {
  font-weight: bold;
}

/**
 * Address styling not present in Safari and Chrome.
 */

dfn {
  font-style: italic;
}

/**
 * Address variable `h1` font-size and margin within `section` and `article`
 * contexts in Firefox 4+, Safari, and Chrome.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/**
 * Address styling not present in IE 8/9.
 */

mark {
  background: #ff0;
  color: #000;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

/* Embedded content
   ========================================================================== */

/**
 * Remove border when inside `a` element in IE 8/9/10.
 */

img {
  border: 0;
}

/**
 * Correct overflow not hidden in IE 9/10/11.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Grouping content
   ========================================================================== */

/**
 * Address margin not present in IE 8/9 and Safari.
 */

figure {
  margin: 1em 40px;
}

/**
 * Address differences between Firefox and other browsers.
 */

hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

/**
 * Contain overflow in all browsers.
 */

pre {
  overflow: auto;
}

/**
 * Address odd `em`-unit font size rendering in all browsers.
 */

code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

/* Forms
   ========================================================================== */

/**
 * Known limitation: by default, Chrome and Safari on OS X allow very limited
 * styling of `select`, unless a `border` property is set.
 */

/**
 * 1. Correct color not being inherited.
 *    Known issue: affects color of disabled elements.
 * 2. Correct font properties not being inherited.
 * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
 */

button,
input,
optgroup,
select,
textarea {
  color: inherit; /* 1 */
  font: inherit; /* 2 */
  margin: 0; /* 3 */
}

/**
 * Address `overflow` set to `hidden` in IE 8/9/10/11.
 */

button {
  overflow: visible;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
 * Correct `select` style inheritance in Firefox.
 */

button,
select {
  text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button; /* 2 */
  cursor: pointer; /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
  cursor: default;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

input {
  line-height: normal;
}

/**
 * It's recommended that you don't attempt to style these elements.
 * Firefox's implementation doesn't respect box-sizing, padding, or width.
 *
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 */

input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Fix the cursor style for Chrome's increment/decrement buttons. For certain
 * `font-size` values of the `input`, it causes the cursor style of the
 * decrement button to change from `default` to `text`.
 */

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box; /* 2 */
  box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari and Chrome on OS X.
 * Safari (but not Chrome) clips the cancel button when the search input has
 * padding (and `textfield` appearance).
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9/10/11.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 */

legend {
  border: 0; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Remove default vertical scrollbar in IE 8/9/10/11.
 */

textarea {
  overflow: auto;
}

/**
 * Don't inherit the `font-weight` (applied by a rule above).
 * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
 */

optgroup {
  font-weight: bold;
}

/* Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}

/* mscore */
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
*:before,
*:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
html {
  font-size: 62.5%;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
body {
  /*font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;*/
  font-family: 'Helvetica Neue', Helvetica, Arial, 'Microsoft Yahei', sans-serif;
  font-size: 14px;
  line-height: 1.42857143;
  color: #333333;
  background-color: #ffffff;
}
input,
button,
select,
textarea {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}
a {
  color: #428bca;
  text-decoration: none;
}
a:hover,
a:focus {
  color: #2a6496;
  text-decoration: underline;
}
a:focus {
  outline: thin dotted;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
figure {
  margin: 0;
}
img {
  vertical-align: middle;
}

/*
Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #f0f0f0;
  -webkit-text-size-adjust: none;
}

.hljs,
.hljs-subst,
.hljs-tag .hljs-title,
.nginx .hljs-title {
  color: black;
}

.hljs-string,
.hljs-title,
.hljs-constant,
.hljs-parent,
.hljs-tag .hljs-value,
.hljs-rules .hljs-value,
.hljs-preprocessor,
.hljs-pragma,
.haml .hljs-symbol,
.ruby .hljs-symbol,
.ruby .hljs-symbol .hljs-string,
.hljs-template_tag,
.django .hljs-variable,
.smalltalk .hljs-class,
.hljs-addition,
.hljs-flow,
.hljs-stream,
.bash .hljs-variable,
.apache .hljs-tag,
.apache .hljs-cbracket,
.tex .hljs-command,
.tex .hljs-special,
.erlang_repl .hljs-function_or_atom,
.asciidoc .hljs-header,
.markdown .hljs-header,
.coffeescript .hljs-attribute {
  color: #800;
}

.smartquote,
.hljs-comment,
.hljs-annotation,
.diff .hljs-header,
.hljs-chunk,
.asciidoc .hljs-blockquote,
.markdown .hljs-blockquote {
  color: #888;
}

.hljs-number,
.hljs-date,
.hljs-regexp,
.hljs-literal,
.hljs-hexcolor,
.smalltalk .hljs-symbol,
.smalltalk .hljs-char,
.go .hljs-constant,
.hljs-change,
.lasso .hljs-variable,
.makefile .hljs-variable,
.asciidoc .hljs-bullet,
.markdown .hljs-bullet,
.asciidoc .hljs-link_url,
.markdown .hljs-link_url {
  color: #080;
}

.hljs-label,
.hljs-javadoc,
.ruby .hljs-string,
.hljs-decorator,
.hljs-filter .hljs-argument,
.hljs-localvars,
.hljs-array,
.hljs-attr_selector,
.hljs-important,
.hljs-pseudo,
.hljs-pi,
.haml .hljs-bullet,
.hljs-doctype,
.hljs-deletion,
.hljs-envvar,
.hljs-shebang,
.apache .hljs-sqbracket,
.nginx .hljs-built_in,
.tex .hljs-formula,
.erlang_repl .hljs-reserved,
.hljs-prompt,
.asciidoc .hljs-link_label,
.markdown .hljs-link_label,
.vhdl .hljs-attribute,
.clojure .hljs-attribute,
.asciidoc .hljs-attribute,
.lasso .hljs-attribute,
.coffeescript .hljs-property,
.hljs-phony {
  color: #88f;
}

.hljs-keyword,
.hljs-id,
.hljs-title,
.hljs-built_in,
.css .hljs-tag,
.hljs-javadoctag,
.hljs-phpdoc,
.hljs-dartdoc,
.hljs-yardoctag,
.smalltalk .hljs-class,
.hljs-winutils,
.bash .hljs-variable,
.apache .hljs-tag,
.hljs-type,
.hljs-typename,
.tex .hljs-command,
.asciidoc .hljs-strong,
.markdown .hljs-strong,
.hljs-request,
.hljs-status {
  font-weight: bold;
}

.asciidoc .hljs-emphasis,
.markdown .hljs-emphasis {
  font-style: italic;
}

.nginx .hljs-built_in {
  font-weight: normal;
}

.coffeescript .javascript,
.javascript .xml,
.lasso .markup,
.tex .hljs-formula,
.xml .javascript,
.xml .vbscript,
.xml .css,
.xml .hljs-cdata {
  opacity: 0.5;
}
#container {
  padding: 15px;
  margin-left:20px;
}
pre {
  border: 1px solid #ccc;
  border-radius: 4px;
  display: block;
}
pre code {
  white-space: pre-wrap;
}
.hljs,
code {
  font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;
}

pre{
  background-color: #dddddd;
  padding:8px 0px 8px 30px;
  word-wrap: break-word;
}
table tbody tr:nth-child(2n) {
    background: rgba(158,188,226,0.12); 
}
:not(pre) > code {
  padding: 2px 4px;
  font-size: 90%;
  color: #c7254e;
  background-color: #f9f2f4;
  white-space: nowrap;
  border-radius: 4px;
}
th, td {
  border: 1px solid #ccc;
  padding: 6px 12px;
}
blockquote {
    border-left-width: 10px;
    background-color: rgba(102,128,153,0.05);
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    padding: 1px 20px
}
blockquote.pull-right small:before,blockquote.pull-right .small:before {
    content: ''
}

blockquote.pull-right small:after,blockquote.pull-right .small:after {
    content: '\00A0 \2014'
}

blockquote:before,blockquote:after {
    content: ""
}
blockquote {
    margin: 0 0 1.1em
}
blockquote p {
    margin-bottom: 1.1em;
    font-size: 1em;
    line-height: 1.45
}

blockquote ul:last-child,blockquote ol:last-child {
    margin-bottom: 0
}
blockquote {
    margin: 0 0 21px;
    border-left: 10px solid #dddddd;
}</style></head>
<body marginwidth="0" marginheight="0">
<div id="container"><h2 id="-ai-">无人机AI线路规划大赛接口文档</h2>
<p><a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump1">2.1 连接服务器</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump2">2.2 身份验证</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump3">2.3 身份验证结果</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump231">2.3.1 选手向裁判服务器表明自己已准备就绪</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump4">2.4 初始化地图</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump5">2.5 选手提交数据</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#jump6">2.6 服务器返回数据</a><br>
<a href="https://cdn.acmcoder.com/assets/hikvision2018/droneaisocket.html#map">地图</a></p>
<h3 id="1-">1. 概述</h3>
<pre><code class="hljsflow">
本次大赛设置有裁判服务器Judger，所有比赛选手Player需要使用Socket TCP和Judger进行通讯，所有通讯数据均为<span class="hljs-built_in">JSON</span>格式。
</code></pre>
<pre><code class="hljsflow">
调试服务器IP地址及TCP端口：
Judge<span class="hljs-string">r's IP:    39.106.111.130
Judger'</span>s port:  <span class="hljs-number">4010</span>
</code></pre>
<h3 id="2-socket-">2. Socket通讯协议</h3>
<p><span id="jump1"></span></p>
<h4 id="2-1-judger">2.1 选手连接裁判服务器Judger</h4>
<p>连接成功后，Judger会返回一条消息：</p>
<pre><code class="hljsjavascript">
{
    "<span class="hljs-attribute">notice</span>": <span class="hljs-value"><span class="hljs-string">"token"</span></span>,
    "<span class="hljs-attribute">msg</span>": <span class="hljs-value"><span class="hljs-string">"hello, what's your token?"</span>
</span>}
</code></pre>
<h4 id="2-2-player-judger-">2.2 选手向裁判服务器表明身份(Player -&gt; Judger)</h4>
<p><span id="jump2"></span></p>
<pre><code class="hljsjavascript">
{
    "<span class="hljs-attribute">token</span>": <span class="hljs-value"><span class="hljs-string">"eyJ0eXAiOiJKV1"</span></span>,
    "<span class="hljs-attribute">action</span>":<span class="hljs-value"><span class="hljs-string">"sendtoken"</span>
</span>}
</code></pre>
<pre><code class="hljsflow">
其中：
<span class="hljs-rule"><span class="hljs-attribute">token</span>:<span class="hljs-value"> 选择对战选手后，会生成一个身份验证令牌，可以在“我的对抗”页面找到；
action：客户端连接服务器的事件类型，sendtoken为进行身份验证。</span></span>
</code></pre>
<h4 id="2-3-judger-player-">2.3 身份验证结果(Judger -&gt; Player)　</h4>
<p><span id="jump3"></span></p>
<pre><code class="hljsjavascript">{
    "<span class="hljs-attribute">token</span>": <span class="hljs-value"><span class="hljs-string">"eyJ0eXAiOiJKV1"</span></span>,
    "<span class="hljs-attribute">notice</span>": <span class="hljs-value"><span class="hljs-string">"tokenresult"</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>,
    "<span class="hljs-attribute">roundId</span>": <span class="hljs-value"><span class="hljs-string">"vvvvv"</span></span>,
    "<span class="hljs-attribute">yourId</span>": <span class="hljs-value"><span class="hljs-string">"player01"</span>
</span>}
</code></pre>
<pre><code class="hljsflow">
其中：
token: 身份验证令牌
notice: tokenresult为进行身份验证结果事件
result: <span class="hljs-number">0</span> 正常， -<span class="hljs-number">1</span> 非法
roundId：对战房间<span class="hljs-keyword">id</span>
yourId: 我的唯一<span class="hljs-keyword">id</span>
</code></pre>
<h4 id="2-2-player-judger-">2.3.1 选手向裁判服务器表明自己已准备就绪(Player -&gt; Judger)</h4>
<p><span id="jump231"></span></p>
<pre><code class="hljsjavascript">
{
    "<span class="hljs-attribute">token</span>": <span class="hljs-value"><span class="hljs-string">"eyJ0eXAiOiJKV1"</span></span>,
    "<span class="hljs-attribute">action</span>":<span class="hljs-value"><span class="hljs-string">"ready"</span>
</span>}
</code></pre>
<h4 id="2-4-judger-player-">2.4 对战开始通知(Judger -&gt; Player)，您需要1s之内返回，否则直接判负，调试阶段无此限制。　</h4>
<p><span id="jump4"></span>
类型：json字符串，服务器通知选手端</p>
<pre><code class="hljsjavascript">js 示例

{
    <span class="hljs-string">"token"</span>: <span class="hljs-string">"eyJ0eXAiOiJKV1"</span>,
    <span class="hljs-string">"notice"</span>: <span class="hljs-string">"sendmap"</span>,
    <span class="hljs-string">"time"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"map"</span>: {***}
}
</code></pre>
<pre><code class="hljsflow">
其中：
token:  身份验证令牌
notice: 发送地图信息后,表示比赛开始，该时刻为<span class="hljs-number">0</span>，参赛者程序收到地图信息，可以移动无人机准备接送货物。此时，需要参赛者将他们所控制的无人机时刻为<span class="hljs-number">0</span>的位置发送给服务器
<span class="hljs-keyword">map</span>：地图数据，参见地图数据格式章节。
</code></pre>
<p><span id="jump5"></span></p>
<h4 id="2-5-player-judger-">2.5 选手返回下一步无人机坐标(Player -&gt; Judger)</h4>
<p>收到“比赛下一步骤指令”指令后，需要1s之内返回，否则直接判负，调试阶段没有此限制。取货放货规则：1、必须到了取货点(start_x, start_y, 0)，才能设置goods_no进行取货；
    2、到了放货点(end_x, end_y, 0)，服务器会自动放货，千万不要自己将goods_no改为-1，否则直接违规，服务器会在这一步的结果中自动将goods_no设置为-1。</p>
<pre><code class="hljsjavascript">
{
    <span class="hljs-string">"token"</span>: <span class="hljs-string">"eyJ0eXAiOiJKV1"</span>,
    <span class="hljs-string">"action"</span>: <span class="hljs-string">"flyPlane"</span>,
    <span class="hljs-comment">//无人机信息: 必须包含我方控制的所有的无人机的信息（除了撞毁的），信息内容包括无人机编号，xyz坐标， goods_no 货物编号，-1表示没有载货。当无人机飞到停机坪后，就默认开始充电，不需要选手设置，由于载货时不能充电，因此载货的时候，不能进入停机坪。</span>
    <span class="hljs-string">"UAV_info"</span>: [
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">80</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"goods_no"</span>: <span class="hljs-number">0</span>},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>, <span class="hljs-string">"goods_no"</span>: -<span class="hljs-number">1</span>},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"goods_no"</span>: <span class="hljs-number">2</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"x"</span>: <span class="hljs-number">70</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"goods_no"</span>: <span class="hljs-number">3</span> }
    ],

    <span class="hljs-comment">//请求购买无人机: 该字段可以没有，如果有表示要购买无人机，提交购买请求后，下一次收到的服务器发送过来的我方无人机信息中会增加相应的无人机信息，初始位置为停机坪,若购买2架F1，一架F2，写法如下：。</span>
    <span class="hljs-string">"purchase_UAV"</span>: [
        { <span class="hljs-string">"purchase"</span>: <span class="hljs-string">"F1"</span> },
        { <span class="hljs-string">"purchase"</span>: <span class="hljs-string">"F1"</span> },
        { <span class="hljs-string">"purchase"</span>: <span class="hljs-string">"F2"</span> }
    ]
}
</code></pre>
<h4 id="2-6-judger-player-">2.6 比赛下一步骤指令(Judger -&gt; Player)</h4>
<p><span id="jump6"></span>
收到“比赛下一步骤指令”指令后，需要1s之内返回，否则直接判负，调试阶段无此限制,与2.5形成循环直到比赛结束。</p>
<pre><code class="hljsjavascript">{
    <span class="hljs-string">"token"</span>: <span class="hljs-string">"eyJ0eXAiOiJKV1"</span>,
    <span class="hljs-string">"notice"</span>: <span class="hljs-string">"step"</span>,
    <span class="hljs-regexp">//</span>比赛状态: <span class="hljs-number">0</span>表示正常比赛中，<span class="hljs-number">1</span>表示比赛结束，收到为<span class="hljs-number">1</span>时，参赛者可以关闭连接, 
    <span class="hljs-string">"match_status"</span>: <span class="hljs-number">0</span>
    //当前时间: 当前的时间，每次给比赛者都会比上一次增加<span class="hljs-number">1</span>
    <span class="hljs-string">"time"</span>: <span class="hljs-number">16</span>,

    <span class="hljs-regexp">//</span>我方无人机信息<span class="hljs-string">": "</span>不同时间，数据不同。 我方无人机的当前信息，根据我方传递给服务器后，服务器经过计算后得到的数据， goods_no货物编号， -<span class="hljs-number">1</span>表示没有载货物，否则表示装载了相应的货物,剩余电量 remain_electricity, 表示当前无人机还剩余的电量
    //状态说明: <span class="hljs-string">"无人机状态 0表示正常， 1表示坠毁， 2表示处于雾区，3表示正在充电 其他数据暂时未定义"</span>
    <span class="hljs-string">"UAV_we"</span>: [
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">0</span>,  <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">80</span>, <span class="hljs-string">"goods_no"</span>: -<span class="hljs-number">1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">1</span>,  <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">0</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">2</span>,  <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">3</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">3</span>,  <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">50</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">5</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">4</span>,  <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">70</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"goods_no"</span>: -<span class="hljs-number">1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>, <span class="hljs-string">"status"</span>: <span class="hljs-number">1</span> }
    ],

    <span class="hljs-regexp">//</span><span class="hljs-string">"我方目前总价值"</span>: <span class="hljs-string" style="font-weight:bold;">"不同时间，数据不同，表示当前时刻，我方所取到的运送物品价值"</span>,
    <span class="hljs-string">"we_value"</span>: <span class="hljs-number">10000</span>, 

    <span class="hljs-regexp">//</span><span class="hljs-string">"敌方无人机信息"</span>: <span class="hljs-string">"不同时间，数据不同。 敌方无人机的当前信息，根据敌方传递给服务器后，服务器经过计算后得到的数据，如果敌方无人机在雾区，状态为2， x， y，z坐标都为-1，表示无效。"</span>
    <span class="hljs-regexp">//</span><span class="hljs-string">"状态说明"</span>: <span class="hljs-string">"无人机状态 0表示正常，2表示处于雾区，3表示正在充电,坠毁的不返回。"</span>
    <span class="hljs-string">"UAV_enemy"</span>: [
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">80</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">-1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">1</span>,<span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>, <span class="hljs-string">"x"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">7</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">80</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">-1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"z"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">-1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span> },
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">5</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>,<span class="hljs-string">"x"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"y"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"z"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"goods_no"</span>: <span class="hljs-number">-1</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">1000</span>,<span class="hljs-string">"status"</span>: <span class="hljs-number">2</span> }
    ],
    <span class="hljs-regexp">//</span><span class="hljs-string">"敌方目前总价值"</span>: <span class="hljs-string" style="font-weight:bold;">"不同时间，数据不同，表示当前时刻，敌方获取到的运送物品价值"</span>,
    <span class="hljs-string">"enemy_value"</span>: <span class="hljs-number">30000</span>, 

    <span class="hljs-regexp">//</span>物品信息: 不同时间，数据不同，<span class="hljs-keyword">no</span> 货物唯一编号， startxy 表示货物出现的地面坐标，endxy表示货物需要运送到的地面坐标， weight表示货物的重量，value表示运送到后货物的价值,start_time:货物出现的时间,remain_time:货物从开始出现到消失的持续时长,left_time: 货物可被捡起的剩余时长，这是个冗余字段，您可以从start_time+remain_time-step得出；一旦被捡起，remain_time和left_time字段无效。status为0表示货物正常且可以被拾起,status为1表示已经被无人机拾起，status为2表示已经运送到目的地，status为3表示无效（无效包括运送过程中撞毁、货物超时未被拾起等，被删除),其实您只能看见0和1状态，因为其他状态的货物会被删除,status为0时，left_time才有意义,已经消失或送到的货物会在列表中被删除。

    <span class="hljs-string">"goods"</span>: [
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"start_x"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"start_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"end_x"</span>: <span class="hljs-number">98</span>, <span class="hljs-string">"end_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"weight"</span>: <span class="hljs-number">55</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"start_time"</span>:<span class="hljs-number">15</span>,<span class="hljs-string">"remain_time"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"left_time"</span>: <span class="hljs-number">89</span>,<span class="hljs-string">"status"</span>: 1},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"start_x"</span>: <span class="hljs-number">98</span>, <span class="hljs-string">"start_y"</span>: <span class="hljs-number">13</span>, <span class="hljs-string">"end_x"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"end_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"weight"</span>: <span class="hljs-number">51</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">90</span>,<span class="hljs-string">"start_time"</span>:<span class="hljs-number">15</span>, <span class="hljs-string">"remain_time"</span>: <span class="hljs-number">9</span>, <span class="hljs-string">"left_time"</span>: <span class="hljs-number">8</span>,<span class="hljs-string">"status"</span>: 0},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"start_x"</span>: <span class="hljs-number">15</span>, <span class="hljs-string">"start_y"</span>: <span class="hljs-number">63</span>, <span class="hljs-string">"end_x"</span>: <span class="hljs-number">81</span>, <span class="hljs-string">"end_y"</span>: <span class="hljs-number">33</span>, <span class="hljs-string">"weight"</span>: <span class="hljs-number">15</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">20</span>,<span class="hljs-string">"start_time"</span>:<span class="hljs-number">15</span>, <span class="hljs-string">"remain_time"</span>: <span class="hljs-number">7</span>, <span class="hljs-string">"left_time"</span>: <span class="hljs-number">6</span>,<span class="hljs-string">"status"</span>: 0},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"start_x"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"start_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"end_x"</span>: <span class="hljs-number">98</span>, <span class="hljs-string">"end_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"weight"</span>: <span class="hljs-number">55</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"start_time"</span>:<span class="hljs-number">15</span>,<span class="hljs-string">"remain_time"</span>: <span class="hljs-number">330</span>, <span class="hljs-string">"left_time"</span>: <span class="hljs-number">329</span>,<span class="hljs-string">"status"</span>: 0},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">5</span>, <span class="hljs-string">"start_x"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"start_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"end_x"</span>: <span class="hljs-number">98</span>, <span class="hljs-string">"end_y"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"weight"</span>: <span class="hljs-number">55</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"start_time"</span>:<span class="hljs-number">15</span>, <span class="hljs-string">"remain_time"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"left_time"</span>: <span class="hljs-number">2</span>,<span class="hljs-string">"status"</span>: 0}
    ]
}
</code></pre>
<h3 id="3-">3. 数据格式描述</h3>
<p><span id="map"></span></p>
<h4 id="3-1-">3.1 地图数据格式</h4>
<pre><code class="hljsjavascript">
{
    <span class="hljs-string">"map"</span>: {         <span class="hljs-comment">//地图信息</span>
        <span class="hljs-string">"x"</span>: <span class="hljs-number">100</span>,  
        <span class="hljs-string">"y"</span>: <span class="hljs-number">100</span>,
        <span class="hljs-string">"z"</span>: <span class="hljs-number" style="color:red;">100</span>    <span class="hljs-comment">//天空最大高度</span>
    },
    <span class="hljs-string">"parking"</span>: {    <span class="hljs-comment">// 停机坪</span>
        <span class="hljs-string">"x"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"y"</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-string">"h_low"</span>: <span class="hljs-number">60</span>,    <span class="hljs-comment">//"飞行最低高度": 固定值</span>
    <span class="hljs-string">"h_high"</span>: <span class="hljs-number" style="color:red;">99</span>,  <span class="hljs-comment">//"飞行最高高度": 固定值</span>
    <span class="hljs-string">"building"</span>: [   <span class="hljs-comment">//xy表示建筑物的起始位置 </span>
                    <span class="hljs-comment">// l表示长度，w表示宽度，h表示高度</span>
                    <span class="hljs-comment">//因此水平上坐标位置为x-&gt;x+l-1, y-&gt;y+w-1",</span>
        { <span class="hljs-string">"x"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"l"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"w"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"h"</span>: <span class="hljs-number">80</span> },
        { <span class="hljs-string">"x"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">40</span>, <span class="hljs-string">"l"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"w"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"h"</span>: <span class="hljs-number">60</span> }

    ],
     <span class="hljs-comment">//雾区: 固定值，整个比赛过程中不变，雾区个数根据地图而不同，</span>
     <span class="hljs-comment">//xy表示雾区的起始位置，l表示长度，w表示宽度，b表示雾区最低高度，</span>
     <span class="hljs-comment">//t表示雾区的最大高度，水平上坐标为x-&gt;x+l-1, y-&gt;y+w-1，垂直区间为b-&gt;t",</span>
    <span class="hljs-string">"fog"</span>: [
        { <span class="hljs-string">"x"</span>: <span class="hljs-number">60</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">60</span>, <span class="hljs-string">"l"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"w"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">55</span>, <span class="hljs-string">"t"</span>: <span class="hljs-number">90</span> },
        { <span class="hljs-string">"x"</span>: <span class="hljs-number">35</span>, <span class="hljs-string">"y"</span>: <span class="hljs-number">47</span>, <span class="hljs-string">"l"</span>: <span class="hljs-number">15</span>, <span class="hljs-string">"w"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">60</span>, <span class="hljs-string">"t"</span>: <span class="hljs-number">99</span> }
    ],
     <span class="hljs-comment">//"一开始停机坪无人机信息": "固定值，整个比赛过程中不变，无人机个数根据地图而不同，无人机信息包括 编号和最大载重量，编号单方唯一,剩余电量 remain_electricity, 表示当前无人机还剩余的电量,初始值为0"</span>
    <span class="hljs-string">"init_UAV"</span>: [
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"x"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"y"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"z"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>，<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">0</span>,<span class="hljs-string">"goods_no"</span>:-<span class="hljs-number">1</span>},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"x"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"y"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"z"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">20</span> ,<span class="hljs-string">"type"</span>: <span class="hljs-string">"F3"</span>，<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">0</span>,<span class="hljs-string">"goods_no"</span>:-<span class="hljs-number">1</span>},
        { <span class="hljs-string">"no"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"x"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"y"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"z"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">20</span> ,<span class="hljs-string">"type"</span>: <span class="hljs-string">"F3"</span>，<span class="hljs-string">"status"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"remain_electricity"</span>: <span class="hljs-number">0</span>,<span class="hljs-string">"goods_no"</span>:-<span class="hljs-number">1</span>}
    ],

    <span class="hljs-comment">//"无人机价格表": "固定值，整个比赛过程中不变，no表示无人机购买编号，价格表根据载重不同，价值也不同，初始化的无人机中的载重必定在这个价格表中，方便统计最后价值,电池容量 capacity，单位时间充电量 charge"</span>
    <span class="hljs-string">"UAV_price"</span>: [
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"F1"</span>, <span class="hljs-string">"load_weight"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">300</span>,<span class="hljs-string">"capacity"</span>: <span class="hljs-number">9000</span>,<span class="hljs-string">"charge"</span>: <span class="hljs-number">1000</span>},
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"F2"</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">50</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">200</span>,<span class="hljs-string">"capacity"</span>: <span class="hljs-number">8000</span> ,<span class="hljs-string">"charge"</span>: <span class="hljs-number">800</span>},
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"F3"</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">100</span>,<span class="hljs-string">"capacity"</span>: <span class="hljs-number">5000</span> ,<span class="hljs-string">"charge"</span>: <span class="hljs-number">400</span>},
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"F4"</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">30</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">150</span>,<span class="hljs-string">"capacity"</span>: <span class="hljs-number">6000</span> ,<span class="hljs-string">"charge"</span>: <span class="hljs-number">500</span>},
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"F5"</span>,<span class="hljs-string">"load_weight"</span>: <span class="hljs-number">360</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">400</span>,<span class="hljs-string">"capacity"</span>: <span class="hljs-number">20000</span>,<span class="hljs-string">"charge"</span>: <span class="hljs-number">3000</span>}
    ],

}
</code></pre>
</div>
</body></html>